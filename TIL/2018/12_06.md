# 2018-12-06

- 네트워크(IP 체계)기초에 대해 새로 알게 됨

## Network
IP주소는 클래스 등급이 나눠진다.

### 공인 IP
- A 클래스 : `0 ~ 127`, 255.0.0.0
- B 클래스 : `128 ~ 191`, 255.255.0.0
- C 클래스 : `192 ~ 223`, 255.255.255.0
- D 클래스 : 멀티캐스트
- E 클래스 : 예약

### 사설 IP
- A 클래스 : 10.0.0.0 ~ 10.255.255.255
- B 클래스 : 172.16.0.0 ~ 172.31.255.255
- C 클래스 : 192.168.0.0 ~ 192.168.255.255


공인 IP가 점점 부족해지고있기 때문에 모든 기기에게 공인 IP를 할당해주는것이 아니라 `DHCP` (Dynamic Host Configuration Protocol)를 통해 내부적으로 사설 IP를 할당하는 방식이 주로 사용되고 있다.

## 서브넷
서브넷 마스크로 인해 만들어진 네트워크

## 서브넷 마스크
호스트카 로컬 서브넷에 있는지, 원격 네트워크에 있는지 확인하기 위해 사용된다.

## 서브넷 마스크 계산 1
IP와 서브넷 마스크가 있으면 `192.168.0.23/24` 네트워크 주소를 구할 수 있다.
<br><br>
`/24` 부분은 아래 `서브넷 마스크 프리픽`스 참고 (255.255.255.0 과 동일한 표현)

```
192.168.0.23 = 11000000.10101000.00000000.00011000
255.255.255.0 = 11111111.11111111.11111111.00000000

11000000.10101000.00000000.00011000
11111111.11111111.11111111.00000000 & (AND)
-------------------------------------------
11000000.10101000.00000000.00000000 = 192.168.0.0
```
IP 주소와 서브넷 마스크를 `AND 연산`한 결과 `192.168.0.0`이 네트워크 주소이다.

- 브로드캐스트 주소는 서브넷 마스크에 `1의 보수`를 취한 값과 네트워크 주소를 `OR연산`하면 구할 수 있다.

```
192.168.0.0 = 11000000.10101000.00000000.00000000
255.255.255.0 = 11111111.11111111.11111111.00000000

11000000.10101000.00000000.00000000
00000000.00000000.00000000.11111111 | (AND)
-------------------------------------------
11000000.10101000.00000000.11111111 = 192.168.0.255
```

계산결과 브로드캐스트 주소는 `192.168.0.255`라는 것을 알 수 있다.

## 서브넷 마스크 계산 2

아래와 같은 상황이라고 가정하고 계산

- 공인 IP : `210.100.1.0`
- 호스트 수 : `30`개
- 네트워크 수 : 최소 `4`개

```
2^호스트비트수-2 = 사용 가능 호스트 수

2^x-2 = 30
2^x = 32
x = 5
```
2를 제외하는 이유는 호스트 비트가(옥텟) 모두 0인 경우는 `호스트 주소`, 1인 경우는 브로드캐스트 주소를 의미
<br><br>
호스트 비트가 `5`인것을 계산하게 됨

호스트 비트 수 만큼 오른쪽 비트를 0으로 사용
```
// 2진수 = 10진수
11111111.11111111.11111111.11111111.11111111 = 255.255.255.255
11111111.11111111.11111111.11111111.11100000 = 255.255.255.224
```

최소 4개의 서브넷이 있어야하고, 서브넷 당 30개의 호스트를 사용하려면 서브넷 마스크는 `255.255.255.224`가 되어야 한다.

## 서브넷 주소 & 호스트 주소

계산한 서브넷 마스크를 통해 공인 IP로 만든 서브넷 주소와 호스트 주소를 알아낼 수 있다.

- 공인 IP : `210.100.1.0`
- 서브넷마스크 : `255.255.255.224`

```
255.255.255.224
11111111.11111111.11111111.1110 0000

서브넷ID 호스트ID
  111    00000
```

| 128 | 64 | 32 | 16 | 8 | 4 | 2 | 1 |
|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|
| 1 | 1 | 1 | 0 | 0 | 0 | 0 | 0 |


- 서브넷 주소 범위 : `000 ~ 111`
- 호스트 주소 범위 : `00000 ~ 11111`

### 서브넷 주소
- 210.100.1.0
- 210.100.1.32
- 210.100.1.64
- 210.100.1.96
- 210.100.1.128
- 210.100.1.160
- 210.100.1.192
- 210.100.1.224

총 `8개`의 서브넷이 생성된다.

### 호스트 주소
- 210.100.1.1 ~ 210.100.1.30
- 210.100.1.33 ~ 210.100.1.62
- 210.100.1.65 ~ 210.100.1.94
- 210.100.1.97 ~ 210.100.1.107
- 210.100.1.129 ~ 210.100.1.159
- 210.100.1.161 ~ 210.100.1.191
- 210.100.1.193 ~ 210.100.1.223
- 210.100.1.225 ~ 210.100.1.255

각 서브넷마다 `30개의` 호스트 할당이 가능

## 서브넷 마스크 프리픽스

위에서 계산한 서브넷 마스크 `255.255.255.224`는 아래와 같이 표기 가능하다. (Prefix)

```
255.255.255.224 = 11111111.11111111.11111111.11100000
 = /네트워크 ID 비트 수
```

`255.255.255.224` = `/27` 이다.
<br>

192.168.0.23/24 이라고 하면 아래와 같다.

- 네트워크 주소 : 192.168.0.0
- 호스트 : 192.168.0.1 ~ 192.168.0.254
- 브로드캐스트 주소 : 192.168.0.255
